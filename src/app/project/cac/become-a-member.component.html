<!-- only show when submitting larger submissions -->
<div class="modal-content progress-content" *ngIf="submitting && (totalSize > 100000)">
  <div class="modal-body">
    <h4 class="modal-title">Submitting your comment...</h4>
    <mat-progress-bar color="primary" mode="buffer" [value]="progressValue" [bufferValue]="progressBufferValue"></mat-progress-bar>
  </div>
</div>

<!-- FIRST PAGE -->
<form #preCommentForm="ngForm">
  <div class="modal-content" *ngIf="this.currentPage === 1">
    <div class="modal-header">
      <h4 class="modal-title">Community Advisory Committee</h4>
      <button class="btn btn-icon close-btn gtm-submit-comment_cancel-pg1" type="button" aria-label="Close" (click)="activeModal.dismiss('dismissed page1')">
        <i class="material-icons">
          close
        </i>
      </button>
    </div>

    <div class="modal-body">
      <section>
        <h3>What is a Community Advisory Committee?</h3>
        <p>The Community Advisory Committee is a way for interested members of the public to actively participate in and stay informed about an environmental assessment by:</p>
          <ul>
            <li>learning more about a proposed project;</li>
            <li>staying up to date on the progress of the environmental assessment; and</li>
            <li>being informed of opportunities to provide their input and advice during the public comment periods and other engagement activities.</li>
          </ul>
        <p>Feedback from Community Advisory Committee members contributes to a better understanding of the potential effects of the proposed project on the community. The Environmental Assessment Office forms and operates Community Advisory Committees digitally through EPIC.</p>
      </section>
      <section class="m-b-0">
        <h3>What can I expect as a Community Advisory Committee Member?</h3>
        <p>The Environmental Assessment Office will provide subscribed Community Advisory Committee members information on the environmental assessment process and the proposed project, including notifications of process milestones, when and where key documents are posted, information on public comment periods and any other engagement opportunities. Members will be invited to provide their input through the public comment periods held throughout the environmental assessment and, depending on the overall interest of Community Advisory Committee members, the Environmental Assessment Office may directly seek the advice of Community Advisory Committee members and establish other engagement opportunities. See the <strong>Community Advisory Committee Guideline</strong> and the <strong>Community Advisory Committee Terms of Reference</strong> for further information.</p>
      </section>
    </div>
    <div class="modal-footer">
      <button type="button" class="btn btn-primary" (click)="p1_next()">Become a Member</button>
    </div>
  </div>
</form>

<!-- Contact Information Form-->
<form #commentForm1="ngForm">
  <div class="modal-content" *ngIf="this.currentPage === 2">
    <div class="modal-header">
      <h4 class="modal-title">Community Advisory Committee</h4>
      <button class="btn btn-icon close-btn gtm-submit-comment-cancel-pg2" type="button" aria-label="Close" (click)="activeModal.dismiss('dismissed page2')">
        <i class="material-icons">
          close
        </i>
      </button>
    </div>
    <div class="modal-body">
      <fieldset>
          <h5 class="modal-title">Member Sign-up</h5>

          <div class="form-group row">
            <div class="form-group">
              <label class="control-label">Full Name *</label>
              <div class="form-control-container">
                <input required class="form-control" type="text" name="nameInput" id="nameInput" [(ngModel)]="nameInput" autofocus />
              </div>
            </div>
            <div class="form-group">
              <label class="control-label">Location</label>
              <div class="form-control-container">
                <input class="form-control" type="text" name="locationInput" id="locationInput" [(ngModel)]="location" autofocus />
              </div>
            </div>
          </div>

          <div class="form-group row">
            <div class="form-group">
              <label class="control-label">Email Address *</label>
              <div class="form-control-container">
                <input required email class="form-control" type="text" name="emailInput" id="emailInput" [(ngModel)]="emailInput" autofocus />
              </div>
            </div>
            <div class="form-group">
              <label class="control-label">Confirm Email Address *</label>
              <div class="form-control-container">
                <input required email class="form-control" type="text" name="emailConfirmInput" id="emailConfirmInput" [(ngModel)]="emailConfirmInput" autofocus />
              </div>
            </div>
          </div>

          <div class="form-group">
            <label class="control-label">Describe your interest in the project</label>
            <div>
              <p class="font-italic understandText">Please select all that apply. You may include additional details or information regarding your interest in the text box below. This information is for the EAO to better understand the membership of the committee, any information you provide here will not be considered as input into the assessment of the project. Please submit your comments on the proposed project through the public comment periods throughout the environmental assessment.</p>
            </div>

            <!-- I live near -->
            <div class="form-group row">
                <label class="control-label"><input class="mr-1" name="liveNear" type="checkbox" [(ngModel)]="liveNear"/>I live near or use the project area</label>
                <input [hidden]="!liveNear" class="form-control col-12" type="text" name="liveNearInput" id="liveNearInput" [(ngModel)]="liveNearInput" autofocus />
            </div>
            <!-- I am a member of -->
            <div class="form-group row">
              <label class="control-label"><input class="mr-1" name="memberOf" type="checkbox" [(ngModel)]="memberOf"/>I am a member of a stakeholder organization</label>
              <input [hidden]="!memberOf" class="form-control col-12" type="text" name="memberOfInput" id="memberOfInput" [(ngModel)]="memberOfInput" autofocus />
            </div>
            <!-- I have knowledge of -->
            <div class="form-group row">
              <label class="control-label"><input class="mr-1" name="knowledgeOf" type="checkbox" [(ngModel)]="knowledgeOf"/>I have knowledge of issues relevant to the potential project</label>
              <input [hidden]="!knowledgeOf" class="form-control col-12" type="text" name="knowledgeOfInput" id="knowledgeOfInput" [(ngModel)]="knowledgeOfInput" autofocus />
            </div>
            <!-- Additional Notes -->
            <div class="form-group row">
              <label class="control-label">Additional Notes:</label>
              <textarea class="form-control" rows="4" name="additionalNotesInput" id="additionalNotesInput" [(ngModel)]="additionalNotesInput" autofocus></textarea>
            </div>
          </div>

          <div class="form-group">
            <label class="control-label understandText">I understand that...</label>
            <p class="font-italic understandText">Your personal information is collected by the Environmental Assessment Office for the purpose of sending you updates on {{project.name}} project under the authority of s.26(c) of the Freedom of Information and Protection of Privacy Act. In submitting your comment, you consent to receiving updates to the email address you have provided. This consent is valid from this date forward and may be revoked by contacting the EAO representative below. Should you have any questions about this collection, or wish to revoke your consent please contact:</p>
              <ul class="font-italic understandText m-0">Director, Digital Services</ul>
              <ul class="font-italic understandText m-0">Environmental Assessment Office</ul>
              <ul class="font-italic understandText m-0">836 Yates Street, Victoria, BC</ul>
              <ul class="font-italic understandText m-0">epicsupport.eao@gov.bc.ca</ul>
              <ul class="font-italic understandText m-0 mb-2">(250) 356-7441</ul>
            <div class="form-control-container">
              <label class="control-label" >
              <input required type="checkbox" aria-label="Checkbox for row item" name="acknowledged" [(ngModel)]='acknowledged'>
                By checking this box, I acklowedge that I understand the above text.
              </label>
            </div>
            <div class="form-control-container">
              <label class="control-label" >
                <input required type="checkbox" aria-label="Checkbox for row item" name="termsOfReference" [(ngModel)]='termsOfReference'>
                By checking this box, I acknowledge that I have read, understood, and will abide by the <a href="https://projects.eao.gov.bc.ca/">Community Advisory Committee Terms of Referece</a>
              </label>
            </div>
          </div>
      </fieldset>
    </div>
    <div class="modal-footer">
      <!-- enable submission when required fields are entered and when either a file or comment is entered -->
      <button class="btn btn-primary" type="button" (click)="p2_next()" [disabled]="!commentForm1.form.valid || (emailInput !== emailConfirmInput)">Complete Submission</button>
    </div>
  </div>
</form>

<!-- Success -->
<div class="modal-content thank-you-content" *ngIf="this.currentPage === 3">
  <div class="modal-header">
    <button class="btn btn-icon close-btn gtm-submit-comment-cancel-pg3" type="button" aria-label="Close" (click)="activeModal.dismiss('dismissed page3')">
      <i class="material-icons">
        close
      </i>
    </button>
  </div>
  <div class="modal-body">
    <div class="thank-you-icon"></div>
    <h4>Thank you for becoming a Community Advisory Committee Member</h4>
    <p>You are now a member of this group!</p>
    <p>We will be communicating with members of the Community Advisory Committee over the assessment stages of this project.  We will send out emails to members of this committee at key points through the assessment.</p>
    <p>Please add <a href="mailto:{{project.cacEmail}}">{{project.cacEmail}}</a> to your contacts to ensure that our emails go to your inbox and are not filtered to your Spam folder.</p>
    <button class="btn btn-primary gtm-submit-comment-done" type="button" (click)="activeModal.close('closed page4')">Back to Project Page</button>
  </div>
</div>
